{% extends "layout.html" %}

{% block content %}
<div class="p-4 p-md-5 mb-4 rounded text-white bg-dark border border-danger shadow">
    <div class="col-md-8 px-0">
        <h1 class="display-4 fst-italic text-danger fw-bold">WASET</h1>
        <p class="lead my-3">The premier platform supporting artisans and small businesses. Sell your products directly or start an auction now.</p>
        {% if not session.user_id %}
            <p class="lead mb-0"><a href="{{ url_for('auth.register') }}" class="text-white fw-bold">Join us now...</a></p>
        {% endif %}
    </div>
</div>

<h3 class="mb-4 border-bottom border-secondary pb-2"><i class="fas fa-fire text-danger"></i> Latest Offers</h3>

<div class="row row-cols-1 row-cols-md-3 g-4">
    {% for item in listings %}
    <div class="col">
        <div class="card h-100 shadow-sm hover-effect">
            <div style="height: 200px; overflow: hidden; background-color: #333;">
                <img src="{{ item.image_url or 'https://via.placeholder.com/400x300?text=No+Image' }}" class="card-img-top h-100 w-100" style="object-fit: cover;" alt="{{ item.title }}">
            </div>
            
            <div class="card-body">
                <div class="d-flex justify-content-between align-items-start mb-2">
                    <h5 class="card-title fw-bold text-white">{{ item.title }}</h5>
                    <span class="badge {{ 'bg-success' if item.listing_type == 'Direct' else 'bg-warning text-dark' }}">
                        {{ item.listing_type }}
                    </span>
                </div>
                
                <p class="card-text text-muted small mb-2">
                    <i class="fas fa-user text-danger"></i> {{ item.producer_name }}
                </p>
                <p class="card-text text-truncate" style="color: #aaa;">{{ item.description }}</p>
                
                <h4 class="text-danger fw-bold mt-3">{{ item.price }}</h4>
            </div>
            <div class="card-footer bg-transparent border-top border-secondary">
                <a href="{{ url_for('listing.view_listing', listing_id=item.id) }}" class="btn btn-outline-danger w-100">
                    <i class="fas fa-eye"></i> View Details
                </a>
            </div>
        </div>
    </div>
    {% else %}
    <div class="col-12 text-center py-5">
        <div class="alert alert-dark border-danger">
            <h4>No offers available currently</h4>
            <p>Be the first producer to add a product!</p>
            {% if session.role == 'Producer' %}
            <a href="{{ url_for('listing.create_listing') }}" class="btn btn-danger">Add Product</a>
            {% endif %}
        </div>
    </div>
    {% endfor %}
</div>
{% endblock %}